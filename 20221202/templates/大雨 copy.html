{% extends "111index.html" %}
{% block main %}
<html>
    <head>
        <style>
            #map{
                left: 15%;
                margin-right: 65%;
                margin-top:85px;
                height: 75%;
                }
        </style>
    </head>
    <body class="paging">
        <div id="map"></div>
        
        <script>
            
            function initMap(){
                var taipeiST = {lat: 25.07457, lng: 121.511537};
                var map = new google.maps.Map(document.getElementById('map'),{
                    zoom: 14.5,
                    center: taipeiST,
                    styles:[
                    {
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#ebe3cd"
                    }
                    ]
                },
                {
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#523735"
                    }
                    ]
                },
                {
                    "elementType": "labels.text.stroke",
                    "stylers": [
                    {
                        "color": "#f5f1e6"
                    }
                    ]
                },
                {
                    "featureType": "administrative",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "visibility": "off"
                    }
                    ]
                },
                {
                    "featureType": "administrative",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#c9b2a6"
                    }
                    ]
                },
                {
                    "featureType": "administrative.land_parcel",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#dcd2be"
                    }
                    ]
                },
                {
                    "featureType": "administrative.land_parcel",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#ae9e90"
                    }
                    ]
                },
                {
                    "featureType": "landscape.natural",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "poi",
                    "stylers": [
                    {
                        "visibility": "off"
                    }
                    ]
                },
                {
                    "featureType": "poi",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "poi",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#93817c"
                    }
                    ]
                },
                {
                    "featureType": "poi.park",
                    "elementType": "geometry.fill",
                    "stylers": [
                    {
                        "color": "#a5b076"
                    }
                    ]
                },
                {
                    "featureType": "poi.park",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#447530"
                    }
                    ]
                },
                {
                    "featureType": "road",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#f5f1e6"
                    }
                    ]
                },
                {
                    "featureType": "road",
                    "elementType": "labels.icon",
                    "stylers": [
                    {
                        "visibility": "off"
                    }
                    ]
                },
                {
                    "featureType": "road.arterial",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#fdfcf8"
                    }
                    ]
                },
                {
                    "featureType": "road.highway",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#f8c967"
                    }
                    ]
                },
                {
                    "featureType": "road.highway",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#e9bc62"
                    }
                    ]
                },
                {
                    "featureType": "road.highway.controlled_access",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#e98d58"
                    }
                    ]
                },
                {
                    "featureType": "road.highway.controlled_access",
                    "elementType": "geometry.stroke",
                    "stylers": [
                    {
                        "color": "#db8555"
                    }
                    ]
                },
                {
                    "featureType": "road.local",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#806b63"
                    }
                    ]
                },
                {
                    "featureType": "transit",
                    "stylers": [
                    {
                        "visibility": "off"
                    }
                    ]
                },
                {
                    "featureType": "transit.line",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "transit.line",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#8f7d77"
                    }
                    ]
                },
                {
                    "featureType": "transit.line",
                    "elementType": "labels.text.stroke",
                    "stylers": [
                    {
                        "color": "#ebe3cd"
                    }
                    ]
                },
                {
                    "featureType": "transit.station",
                    "elementType": "geometry",
                    "stylers": [
                    {
                        "color": "#dfd2ae"
                    }
                    ]
                },
                {
                    "featureType": "water",
                    "elementType": "geometry.fill",
                    "stylers": [
                    {
                        "color": "#b9d3c2"
                    }
                    ]
                },
                {
                    "featureType": "water",
                    "elementType": "labels.text.fill",
                    "stylers": [
                    {
                        "color": "#92998d"
                    }
                    ]
                }
                    ]   
            });
                
                /*YanpingN5_1 延平北路五段1巷
                MinzuW_2ed 民族路第二條管線*/
                /*const YanpingN4 = [
                    { lat: 25.07886711939338, lng: 121.5107556697933},
                    { lat: 25.0774809155821, lng: 121.51198940617088},
                    { lat: 25.076527511730234, lng: 121.51205507927867},
                    { lat: 25.072088204569894, lng: 121.51091759669276},
                    { lat: 25.068715107170163, lng: 121.51076403225119},
                    { lat: 25.063919635539676, lng: 121.51113330323267},
                ];
                const MinzuW = [
                    { lat: 25.068744072850222, lng: 121.50915208919855},
                    { lat: 25.06870573679376, lng: 121.51087510794363},
                    { lat: 25.06857372431879, lng: 121.51230307119216,},
                    { lat: 25.068578035396897, lng: 121.51351603365737},
                ];
                const Jiuquan = [
                    { lat: 25.07206447940287, lng: 121.51365250860107},
                    { lat: 25.072167116309245, lng: 121.50918806196451},
                ];
                const ChongqingN3_236 = [
                    { lat: 25.070175154021797, lng: 121.51084576411324},
                    { lat: 25.070056729907805, lng: 121.51153868234763},
                    { lat: 25.070691883410916, lng: 121.51170038290911},
                    { lat: 25.070663705822042, lng: 121.51350255111777},
                ];
                const Changji = [
                    { lat: 25.06594059122247, lng: 121.50888756679177},
                    { lat: 25.066071278910904, lng: 121.51105844743827},
                    { lat: 25.066099251400075, lng: 121.51413648501466},
                ];
                const YanpingN5_1 = [
                    { lat: 25.07893550368935, lng: 121.5106748804634},
                    { lat: 25.078869218480207, lng: 121.50838586848727},
                ];
                const RiverN2 = [
                    { lat: 25.06543546539899, lng: 121.50876047266087},
                    { lat: 25.06886435598824, lng: 121.5091450616346},
                    { lat: 25.071207880429718, lng: 121.50926648448505},
                    { lat: 25.07231887157424, lng: 121.50916111810318},
                    { lat: 25.075231496223193, lng: 121.50883079703712},
                    { lat: 25.076552147035663, lng: 121.50889735712627},
                    { lat: 25.08000195071031, lng: 121.50804763890096},
                ];
                const HaiguangPark = [
                    { lat: 25.083382480995468, lng: 121.50771081980565},
                    { lat: 25.082645385164483, lng: 121.50792916872399},
                    { lat: 25.082257512774817, lng: 121.5077703110714},
                    { lat: 25.079979498042164, lng: 121.50806520719885},
                ];
                const Hulu = [
                    { lat: 25.08060041102474, lng: 121.50769623196118},
                    { lat: 25.080807464745803, lng: 121.50874049096223},
                    { lat: 25.08036713188116, lng: 121.50908370749363},
                    { lat: 25.080134401652856, lng: 121.509875993106},
                ];
                const Dunhuang = [
                    { lat: 25.076558395792006, lng: 121.51207931882465},
                    { lat: 25.07308310038998, lng: 121.51349675152755},
                ];
                const ChongqingN3_point = [
                    { lat: 25.076558395792006, lng: 121.51206676005802},
                    { lat: 25.076534351146776, lng: 121.51339410468444},
                ];
                const MinzuW_2ed = [
                    { lat: 25.068769237572738, lng: 121.51077528073637},
                    { lat: 25.068871950360204, lng: 121.51108711593184},
                    { lat: 25.06892330672163, lng: 121.5134684028726},
                ];

                var pipeline = [YanpingN4, Jiuquan, MinzuW, ChongqingN3_236, Changji, YanpingN5_1, RiverN2, HaiguangPark, Hulu, Dunhuang, ChongqingN3_point, MinzuW_2ed]
                for (var j=0; j<pipeline.length; j++){
                    const flightPath = new google.maps.Polyline({
                        path: pipeline[j],
                        geodesic: true,
                        strokeColor: "#4f4f4f",
                        strokeOpacity: 1.0,
                        strokeWeight: 2,
                    });
                    flightPath.setMap(map);
                }
                */
                var P_70 = [0,0,0,0,0,0,0,0,0,0,0,0,11.42857143,0,0,8.571428571,22.85714286,20,8.571428571,22.85714286,8.571428571,20,0,0,0,0,0,0,0,2.857142857,20,20,8.571428571,20,20,20,14.28571429,14.28571429,8.571428571,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22.85714286,8.571428571,5.714285714,8.571428571,8.571428571,8.571428571,8.571428571,8.571428571,0,8.571428571,8.571428571,0,0,8.571428571,20,8.571428571,8.571428571,0,0,0,8.571428571,8.571428571,14.28571429,100,0,0,0,0,0,0,100,0
                    ];
                var P_80 = [0,0,0,0,0,0,0,0,0,0,0,0,11.42857143,0,0,0,14.28571429,8.571428571,0,20,0,8.571428571,0,0,0,0,0,0,0,0,8.571428571,8.571428571,5.714285714,8.571428571,8.571428571,8.571428571,8.571428571,5.714285714,0,2.857142857,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,0,0,5.714285714,8.571428571,5.714285714,8.571428571,0,0,0,0,0,0,8.571428571,0,0,0,0,0,0,0,0,100,0,0,0,0,0,0,100,0
                    ]
                var P_90 = [0,0,0,0,0,0,0,0,0,0,0,0,11.42857143,0,0,0,8.571428571,5.714285714,0,8.571428571,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8.571428571,0,0,0,2.857142857,5.714285714,0,5.714285714,0,0,0,0,0,0,2.857142857,0,0,0,0,0,0,0,0,100,0,0,0,0,0,0,100,0
                    ]
                var LAT = [25.063873,25.065083,25.066456,25.065308,25.065847,25.065873,25.065889,25.065949,25.066598,25.065939,25.065932,25.065932,25.065941,25.067548,25.068677,25.069634,25.070943,25.072188,25.070067,25.069984,25.068684,25.068722,25.06868,25.067411,25.068259,25.06871,25.069694,25.070299,25.070849,25.072186,25.072107,25.072137,25.072157,25.073334,25.072919,25.073695,25.0742,25.07457,25.074922,25.075481,25.07308,25.073622,25.074119,25.074778,25.075392,25.075997,25.076502,25.076538,25.080647,25.081462,25.081417,25.080965,25.080667,25.080312,25.080103,25.080066,25.08002,25.082581,25.08297,25.083223,25.082076,25.065912,25.065932,25.065934,25.065927,25.065937,25.070542,25.070541,25.070511,25.0705,25.06855,25.068561,25.068582,25.068571,25.068641,25.06866,25.068663,25.072044,25.072045,25.072057,25.072059,25.076898,25.077051,25.076505,25.076534,25.076527,25.076537,25.07595,25.076419,25.080198,25.077478,25.072911,25.080586,25.078662,25.078626,25.080506,25.080119,25.080532
                    ];
                var LNG = [121.511125,121.511051,121.510968,121.508752,121.509419,121.509815,121.510361,121.508825,121.508877,121.51159,121.511074,121.511005,121.510926,121.510903,121.510838,121.510842,121.510867,121.511011,121.510854,121.511527,121.511522,121.511027,121.509996,121.508969,121.509062,121.509133,121.509236,121.509249,121.509251,121.509108,121.51111,121.510337,121.509722,121.511254,121.511173,121.511345,121.511456,121.511537,121.511617,121.511739,121.509032,121.508945,121.508928,121.508911,121.508873,121.508846,121.508888,121.508888,121.508667,121.507927,121.507768,121.507895,121.507983,121.508933,121.50926,121.509448,121.509765,121.507912,121.507794,121.507686,121.507751,121.514088,121.513483,121.513047,121.512522,121.512115,121.511837,121.512263,121.513195,121.513571,121.513534,121.513137,121.512285,121.512919,121.513534,121.513128,121.512305,121.513588,121.513459,121.512577,121.511873,121.511982,121.511914,121.513259,121.512605,121.51213,121.511961,121.51185,121.511951,121.507991,121.508525,121.513601,121.507983,121.51084,121.508312,121.507665,121.507317,121.507973
                    ];

                waterDeep = function(deep){
                    for (var i=0; i<LAT.length; i++){
                        var LATLNG = {lat: LAT[i], lng: LNG[i]};
                        var PP = deep[i];
                        if (PP >= 50){ 
                            var markersss = new google.maps.Marker({
                            position: LATLNG,
                            icon: '../static/3.png',
                            map: map
                            });
                        }
                        else if (PP<50 & PP>=30){ 
                            var markersss = new google.maps.Marker({
                            position: LATLNG,
                            icon: '../static/2.png',
                            map: map
                            });
                        }
                        else if (PP<60 & PP>=10){ 
                            var markersss = new google.maps.Marker({
                            position: LATLNG,
                            icon: '../static/1.png',
                            map: map
                            });
                        }
                        else if (PP < 10){ 
                            var markersss = new google.maps.Marker({
                            position: LATLNG,
                            icon: '../static/0.png',
                            map: map
                            });
                        }
                    }
                }
                var markersss = new google.maps.Marker({
                        position:  {lat: 25.080119, lng: 121.507317},/*放流口*/
                        icon: '../static/4.png',
                        map: map
                    });
                var markersss = new google.maps.Marker({
                        position:  {lat: 25.080198, lng: 121.507991},/*DihuaPS*/
                        icon: '../static/4.png',
                        map: map
                    });
            }
            
            function loadPipe(){
                for (var j=0; j<pipe.length; j++){
                    const flightPath = new google.maps.Polyline({
                        path: pipe.geometry.coordinates[i],
                        geodesic: true,
                        strokeColor: "#4f4f4f",
                        strokeOpacity: 1.0,
                        strokeWeight: 2,
                    });
                    flightPath.setMap(map);
                }
            }

            var requestURL ='../pipeline.json';
            var request = new XMLHttpRequest();
            request.open('GET', requestURL);
            request.responseType = 'json';
            request.send();

            request.onload = function(){
                var pipe = request.response;
                loadPipe(pipe);
            }

            /*window.onload = initMap;*/

            /*map.data.loadGeoJson(*/
        </script>
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-DVxN-HoeGrw77OmWd21eZsCW3r2PGKY&callback=initMap">
        </script>

        <div class="introduce">
            <div class="intr-title">歷史降雨：大雨</div>
            <input class="water-deep" type="button" value="水深70%" onclick="waterDeep(deep='P_70')">
            <input class="water-deep" type="button" value="水深80%" onclick="">
            <input class="water-deep" type="button" value="水深90%" onclick="">
            <div class="intr-main">溢流狀況等介紹...</div>
            <img style="text-align: bottom;" src="./static/messageImage_1669952138615.jpg"/>
        </div>

    </body>
</html>
{% endblock %}