{% extends "111index.html" %}
{% block main %}
<html>
    <head>
        <style>
            #map{
                left: 15%;
                margin-right: 65%;
                margin-top:85px;
                height: 75%;
                }
        </style>
    </head>
    <body class="paging">
        <div id="map"></div>
        
        <script>
            function initMap(){
                var taipeiST = {lat: 25.07457, lng: 121.511537};
                var map = new google.maps.Map(document.getElementById('map'),{
                    zoom: 15,
                    center: taipeiST,
                    styles:[ /*減少雜亂地標*/
                    {
                        "featureType": "poi",
                        "elementType": "labels.text",
                        "stylers": [
                        {
                            "visibility": "off"
                        }
                        ]
                    },
                    ]   
                });
                const YanpingN4 = [
                        { lat: 25.078794986827063, lng: 121.51083531047169},
                        { lat: 25.076455377794517, lng: 121.51197543860198},
                        { lat: 25.072088204569894, lng: 121.51091759669276},
                        { lat: 25.068715107170163, lng: 121.51076403225119},
                        { lat: 25.063919635539676, lng: 121.51113330323267},
                ];
                const St1 = [
                    { lat: 25.072192004153578, lng: 121.50911677855555},
                    { lat: 25.07205191874465, lng: 121.51384931487087},
                ];
                const St2 = [
                    { lat: 25.068745856580648, lng: 121.50920957338622},
                    { lat: 25.06860576723014, lng: 121.51375652004026},
                ];
                const St3 = [
                    { lat: 25.070175154021797, lng: 121.51084576411324},
                    { lat: 25.070056729907805, lng: 121.51153868234763},
                    { lat: 25.07058917215207, lng: 121.51164368560103},
                    { lat: 25.070535316697416, lng: 121.51372934035021},
                ];
                const St4 = [
                    { lat: 25.06583787598015, lng: 121.50883086948357},
                    { lat: 25.065919500008647, lng: 121.51427822828413},
                ];
                const St5 = [
                    { lat: 25.06476781221157, lng: 121.50878882131576},
                    { lat: 25.070264658563858, lng: 121.50916111810318},
                    { lat: 25.076244027754917, lng: 121.50872726520191},
                    { lat: 25.07997627486921, lng: 121.50782084966852},
                ];
                const St6 = [
                    { lat: 25.078815282800505, lng: 121.510807614925},
                    { lat: 25.078869218480207, lng: 121.50818742790966},
                ];
                const St7 = [
                    { lat: 25.083382480995468, lng: 121.50771081980565},
                    { lat: 25.082645385164483, lng: 121.50792916872399},
                    { lat: 25.08205210968623, lng: 121.50757187049379},
                    { lat: 25.08005652561394, lng: 121.50781006931311},
                ];
                const St8 = [
                    { lat: 25.080574735334437, lng: 121.5077812779225},
                    { lat: 25.080807464745803, lng: 121.508627096346},
                    { lat: 25.08026442876438, lng: 121.50905535883874},
                    { lat: 25.080031698320695, lng: 121.50984764445104},
                ];
                
                
                const flightPath = new google.maps.Polyline({
                    path: YanpingN4,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath.setMap(map);

                const flightPath1 = new google.maps.Polyline({
                    path: St1,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath1.setMap(map);

                const flightPath2 = new google.maps.Polyline({
                    path: St2,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath2.setMap(map);
               
                const flightPath3 = new google.maps.Polyline({
                    path: St3,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath3.setMap(map);

                const flightPath4 = new google.maps.Polyline({
                    path: St4,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath4.setMap(map);

                const flightPath5 = new google.maps.Polyline({
                    path: St5,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath5.setMap(map);

                const flightPath6 = new google.maps.Polyline({
                    path: St6,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath6.setMap(map);

                const flightPath7 = new google.maps.Polyline({
                    path: St7,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath7.setMap(map);

                const flightPath8 = new google.maps.Polyline({
                    path: St8,
                    geodesic: true,
                    strokeColor: "#4f4f4f",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                flightPath8.setMap(map);
            
                /*
                fetch("../123456.json")
                    .then(results => results.json())
                    .then(result => {
                        let res = result.features;
                        Array.prototype.forEach.call(res, r => { //迭代，1緯度 0經度
                            let latLng = new google.maps.LatLng(r.geometry.coordinates[1], r.geometry.coordinates[0]);
                            let marker = new google.maps.Marker({
                                position: latLng,
                                map: map
                            });
                        });
                    });
                    */
                var P_70 = [0,0,0,0,0,0,0,0,0,0,100,0,100,100,100,100,100,100,100,100,100,100,0,0,0,0,0,0,0,100,100,100,100,100,100,100,100,100,100,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,100,100,100,100,100,100,100,100,0,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,0,0,0,0,0,0,100,0
                    ];
                var P_80 = [0,0,0,0,0,0,0,0,0,0,100,0,100,0,0,0,100,100,0,100,100,100,0,0,0,0,0,0,0,0,100,100,100,100,100,100,100,100,100,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,100,0,0,0,100,100,100,100,0,100,100,0,0,0,100,100,100,0,0,0,100,100,100,100,0,0,0,0,0,0,100,0
                    ];
                var P_90 = [0,0,0,0,0,0,0,0,0,0,100,0,100,0,0,0,100,100,0,100,0,100,0,0,0,0,0,0,0,0,100,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,100,0,0,0,100,100,100,100,0,0,0,0,0,0,100,0,0,0,0,0,0,0,0,100,0,0,0,0,0,0,100,0
                    ];
                var LAT = [25.063873,25.065083,25.066456,25.065308,25.065847,25.065873,25.065889,25.065949,25.066598,25.065939,25.065932,25.065932,25.065941,25.067548,25.068677,25.069634,25.070943,25.072188,25.070067,25.069984,25.068684,25.068722,25.06868,25.067411,25.068259,25.06871,25.069694,25.070299,25.070849,25.072186,25.072107,25.072137,25.072157,25.073334,25.072919,25.073695,25.0742,25.07457,25.074922,25.075481,25.07308,25.073622,25.074119,25.074778,25.075392,25.075997,25.076502,25.076538,25.080647,25.081462,25.081417,25.080965,25.080667,25.080312,25.080103,25.080066,25.08002,25.082581,25.08297,25.083223,25.082076,25.065912,25.065932,25.065934,25.065927,25.065937,25.070542,25.070541,25.070511,25.0705,25.06855,25.068561,25.068582,25.068571,25.068641,25.06866,25.068663,25.072044,25.072045,25.072057,25.072059,25.076898,25.077051,25.076505,25.076534,25.076527,25.076537,25.07595,25.076419,25.080198,25.077478,25.072911,25.080586,25.078662,25.078626,25.080506,25.080119,25.080532
                    ];
                var LNG = [121.511125,121.511051,121.510968,121.508752,121.509419,121.509815,121.510361,121.508825,121.508877,121.51159,121.511074,121.511005,121.510926,121.510903,121.510838,121.510842,121.510867,121.511011,121.510854,121.511527,121.511522,121.511027,121.509996,121.508969,121.509062,121.509133,121.509236,121.509249,121.509251,121.509108,121.51111,121.510337,121.509722,121.511254,121.511173,121.511345,121.511456,121.511537,121.511617,121.511739,121.509032,121.508945,121.508928,121.508911,121.508873,121.508846,121.508888,121.508888,121.508667,121.507927,121.507768,121.507895,121.507983,121.508933,121.50926,121.509448,121.509765,121.507912,121.507794,121.507686,121.507751,121.514088,121.513483,121.513047,121.512522,121.512115,121.511837,121.512263,121.513195,121.513571,121.513534,121.513137,121.512285,121.512919,121.513534,121.513128,121.512305,121.513588,121.513459,121.512577,121.511873,121.511982,121.511914,121.513259,121.512605,121.51213,121.511961,121.51185,121.511951,121.507991,121.508525,121.513601,121.507983,121.51084,121.508312,121.507665,121.507317,121.507973
                    ];
                for (var i=0; i<LAT.length; i++){
                    var LATLNG = {lat: LAT[i], lng: LNG[i]};
                    var PP = P_70[i];
                    if (PP >= 70){ 
                        var markersss = new google.maps.Marker({
                        position: LATLNG,
                        icon: '../static/3.png',
                        map: map
                        });
                    }
                    else if (PP<70 & PP>=50){ 
                        var markersss = new google.maps.Marker({
                        position: LATLNG,
                        icon: '../static/2.png',
                        map: map
                        });
                    }
                    else if (PP<50 & PP>=30){ 
                        var markersss = new google.maps.Marker({
                        position: LATLNG,
                        icon: '../static/1.png',
                        map: map
                        });
                    }
                    else if (PP < 30){ 
                        var markersss = new google.maps.Marker({
                        position: LATLNG,
                        icon: '../static/0.png',
                        map: map
                        });
                    }
                }

                var markersss = new google.maps.Marker({
                        position:  {lat: 25.080119, lng: 121.507317},/*放流口*/
                        icon: '../static/4.png',
                        map: map
                    });
                var markersss = new google.maps.Marker({
                        position:  {lat: 25.080198, lng: 121.507991},/*DihuaPS*/
                        icon: '../static/4.png',
                        map: map
                    });
            }
                /*map.data.loadGeoJson('../mark.geojson');*/
        </script>
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-DVxN-HoeGrw77OmWd21eZsCW3r2PGKY&callback=initMap">
        </script>

        <div class="introduce">
            <div class="intr-title">納莉颱風</div>
            <div class="intr-main">溢流狀況等介紹...</div>
            <img style="text-align: bottom;" src="./static/messageImage_1669952138615.jpg"/>
        </div>

    </body>
</html>
{% endblock %}